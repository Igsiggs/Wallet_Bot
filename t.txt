
# Bot Wallet Project

Этот проект представляет собой бота-кошелек, который позволяет пользователям управлять несколькими кошельками для различных валют, обновлять курсы валют, отправлять сообщения всем пользователям, пересылать валюту по UUID кошелька и получать список своих кошельков и баланс каждого.

## Стек технологий

- aiogram 3
- FastAPI
- SQLAlchemy
- Alembic
- PostgreSQL
- Docker

## Установка и запуск

### Шаг 1: Клонирование репозитория

bash
git clone <repository_url>
cd wallet_bot


### Шаг 2: Настройка окружения

Создайте файл `.env` в корневой директории проекта и заполните его следующими значениями:

plain text
DATABASE_URL=postgresql+asyncpg://user:password@db/dbname
TELEGRAM_TOKEN=<YOUR_TELEGRAM_BOT_TOKEN>
CURRENCY_API_URL=https://api.exchangerate-api.com/v4/latest/USD


Замените `<YOUR_TELEGRAM_BOT_TOKEN>` на ваш реальный токен бота Telegram.

### Шаг 3: Запуск проекта с помощью Docker

Убедитесь, что у вас установлен Docker и Docker Compose.

1. Соберите и запустите контейнеры:

bash
docker-compose up --build


2. Примените миграции базы данных (если необходимо):

bash
docker-compose exec web alembic upgrade head


Это создаст и запустит контейнеры для базы данных PostgreSQL, веб-сервера FastAPI и бота Telegram.

### Шаг 4: Взаимодействие с ботом

1. Найдите вашего бота в Telegram и начните с команды `/start`.
2. Используйте команды `/create_wallet`, `/wallets`, и `/send` для взаимодействия с ботом.

### Команды бота

- `/start` - Начало работы с ботом.
- `/create_wallet <currency>` - Создание нового кошелька для указанной валюты.
- `/wallets` - Получение списка всех кошельков и их балансов.
- `/send <wallet_id> <amount> <target_wallet_id>` - Перевод указанной суммы с одного кошелька на другой.

### API

Вы можете взаимодействовать с API через браузер или инструменты вроде Postman. API доступно по адресу `http://localhost:8000`.

- `POST /users/` - Создание нового пользователя.
- `GET /users/{user_id}/wallets/` - Получение списка кошельков пользователя.
- `POST /users/{user_id}/wallets/` - Создание нового кошелька для пользователя.

## Примечания

- Не забудьте заменить `<YOUR_TELEGRAM_BOT_TOKEN>` на ваш реальный токен бота Telegram.
- Убедитесь, что у вас есть доступ к интернету для обновления курсов валют через публичное API.

Если у вас возникнут вопросы или проблемы, пожалуйста, обратитесь к документации или создайте issue в репозитории.

Удачи!
